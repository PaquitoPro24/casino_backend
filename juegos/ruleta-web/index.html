<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<title>Ruleta Royal Crumbs</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="screen-orientation" content="landscape">
	<meta name="orientation" content="landscape">
	<link rel="manifest" href="manifest.json">
	<link href="style.css" rel="stylesheet" type="text/css">
	<style>
		/* =======================================================================
		   DOCUMENTACI√ìN - ESTILOS DE RULETA M√ìVIL
		   =======================================================================
		   
		   üéØ RESUMEN R√ÅPIDO - VALORES PARA AJUSTAR POSICI√ìN:
		   
		   translateX(0px)    ‚Üí Mover HORIZONTALMENTE (+ derecha, - izquierda)
		   translateY(-250px) ‚Üí Mover VERTICALMENTE (- arriba, + abajo)
		   scale(0.42)        ‚Üí Tama√±o (0.42 = 42%)
		   
		   ======================================================================= */

		/* Desactiva selecci√≥n de texto y arrastrar */
		* {
			-webkit-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
			-webkit-touch-callout: none;
			-webkit-user-drag: none;
		}

		/* Mensaje de rotaci√≥n */
		#rotate-prompt {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
			z-index: 9999;
			display: flex;
			align-items: center;
			justify-content: center;
		}
	</style>
</head>

<body>
	<!-- Mensaje para rotar a landscape -->
	<div id="rotate-prompt" style="display: none;">
		<div style="text-align: center; color: #ab925c;">
			<svg width="100" height="100" viewBox="0 0 100 100" style="margin-bottom: 20px;">
				<rect x="20" y="35" width="60" height="30" fill="none" stroke="#ab925c" stroke-width="3" rx="5" />
				<path d="M 50 20 L 60 30 L 40 30 Z" fill="#ab925c" />
			</svg>
			<h2 style="font-family: Arial, sans-serif; font-size: 24px; margin: 10px 0;">Por favor, rota tu dispositivo
			</h2>
			<p style="font-family: Arial, sans-serif; font-size: 16px;">Este juego funciona mejor en orientaci√≥n
				horizontal</p>
		</div>
	</div>

	<script>
		// Disable right-click context menu
		document.addEventListener('contextmenu', function (e) {
			e.preventDefault();
			return false;
		});

		// Disable text selection
		document.onselectstart = function () {
			return false;
		};

		// Forzar orientaci√≥n landscape para PWA
		function forceLandscape() {
			// M√©todo 1: Screen Orientation API (m√°s moderno)
			if (screen.orientation && screen.orientation.lock) {
				screen.orientation.lock('landscape').then(function () {
					console.log('‚úÖ Orientaci√≥n bloqueada en landscape');
				}).catch(function (error) {
					console.log('‚ö†Ô∏è No se pudo bloquear orientaci√≥n:', error.message);
					// Intentar m√©todo alternativo
					tryFullscreenLandscape();
				});
			} else {
				// Si no est√° disponible, intentar fullscreen
				tryFullscreenLandscape();
			}
		}

		// M√©todo 2: Fullscreen con orientaci√≥n landscape
		function tryFullscreenLandscape() {
			const elem = document.documentElement;
			if (elem.requestFullscreen) {
				elem.requestFullscreen({ orientationLock: 'landscape' }).then(function () {
					console.log('‚úÖ Fullscreen landscape activado');
					// Intentar bloquear orientaci√≥n despu√©s de fullscreen
					if (screen.orientation && screen.orientation.lock) {
						screen.orientation.lock('landscape').catch(function (e) {
							console.log('Orientaci√≥n ya bloqueada o no soportada');
						});
					}
				}).catch(function (err) {
					console.log('‚ö†Ô∏è Fullscreen no disponible:', err.message);
				});
			}
		}

		// Detectar si es PWA (standalone mode)
		function isPWA() {
			return window.matchMedia('(display-mode: standalone)').matches ||
				window.navigator.standalone === true ||
				document.referrer.includes('android-app://');
		}

		// Intentar forzar landscape al cargar
		window.addEventListener('load', function () {
			if (isPWA()) {
				console.log('üì± PWA detectada - Forzando landscape');
				forceLandscape();
			} else {
				console.log('üåê Modo navegador - Landscape opcional');
			}
		});

		// Intentar forzar landscape en primera interacci√≥n
		document.addEventListener('click', function () {
			if (!document.fullscreenElement && isPWA()) {
				forceLandscape();
			}
		}, { once: true });

		// Detectar cambios de orientaci√≥n y avisar al usuario
		window.addEventListener('orientationchange', function () {
			if (window.orientation === 0 || window.orientation === 180) {
				// Portrait detectado
				console.log('‚ö†Ô∏è Dispositivo en portrait - Se recomienda landscape');
			} else {
				// Landscape detectado
				console.log('‚úÖ Dispositivo en landscape');
			}
		});

		// Funci√≥n para verificar orientaci√≥n y mostrar/ocultar mensaje
		function checkOrientation() {
			const rotatePrompt = document.getElementById('rotate-prompt');
			const isPortrait = window.innerHeight > window.innerWidth;

			if (isPortrait && window.innerWidth < 900) {
				// Mostrar mensaje de rotaci√≥n en portrait
				rotatePrompt.style.display = 'flex';
			} else {
				// Ocultar mensaje en landscape
				rotatePrompt.style.display = 'none';
			}
		}

		// Verificar orientaci√≥n al cargar y al cambiar tama√±o
		window.addEventListener('load', checkOrientation);
		window.addEventListener('resize', checkOrientation);
		window.addEventListener('orientationchange', checkOrientation);
	</script>
	<script src="app.js"></script>
	<script src="db-integration.js"></script>
</body>
</CodeContent>
<parameter name="EmptyFile">false