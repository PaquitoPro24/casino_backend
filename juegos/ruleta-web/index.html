<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<title>Ruleta Royal Crumbs</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="screen-orientation" content="landscape">
	<meta name="orientation" content="landscape">
	<link rel="manifest" href="manifest.json">
	<link href="style.css" rel="stylesheet" type="text/css">
	<style>
		/* =======================================================================
		   DOCUMENTACI√ìN - ESTILOS DE RULETA M√ìVIL
		   =======================================================================
		   
		   üéØ RESUMEN R√ÅPIDO - VALORES PARA AJUSTAR POSICI√ìN:
		   
		   translateX(0px)    ‚Üí Mover HORIZONTALMENTE (+ derecha, - izquierda)
		   translateY(-250px) ‚Üí Mover VERTICALMENTE (- arriba, + abajo)
		   scale(0.42)        ‚Üí Tama√±o (0.42 = 42%)
		   
		   ======================================================================= */

		/* Desactiva selecci√≥n de texto y arrastrar */
		* {
			-webkit-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
			-webkit-touch-callout: none;
			-webkit-user-drag: none;
		}

		/* Mensaje de rotaci√≥n */
		#rotate-prompt {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
			z-index: 9999;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		/* Bot√≥n de volver - ajustes para m√≥vil */
		@media only screen and (max-width: 900px),
		only screen and (max-height: 550px) {
			#back-button {
				top: 10px !important;
				left: 10px !important;
				padding: 8px 12px !important;
				font-size: 14px !important;
			}

			#back-button svg {
				width: 16px !important;
				height: 16px !important;
			}
		}
	</style>
</head>

<body>
	<!-- Mensaje para rotar a landscape -->
	<div id="rotate-prompt" style="display: none;">
		<div style="text-align: center; color: #ab925c;">
			<svg width="60" height="60" viewBox="0 0 100 100" style="margin-bottom: 12px;">
				<rect x="20" y="35" width="60" height="30" fill="none" stroke="#ab925c" stroke-width="3" rx="5" />
				<path d="M 50 20 L 60 30 L 40 30 Z" fill="#ab925c" />
			</svg>
			<h2 style="font-family: Arial, sans-serif; font-size: 14px; margin: 6px 0;">Por favor, rota tu dispositivo
			</h2>
			<p style="font-family: Arial, sans-serif; font-size: 10px;">Este juego funciona mejor en orientaci√≥n
				horizontal</p>
		</div>
	</div>

	<!-- Bot√≥n de Volver al Men√∫ -->
	<a href="/games" id="back-button" style="
		position: fixed;
		top: 20px;
		left: 20px;
		z-index: 9998;
		background: linear-gradient(135deg, #ab925c 0%, #d5b714 100%);
		color: #1a1a1a;
		padding: 12px 20px;
		border-radius: 8px;
		text-decoration: none;
		font-family: Arial, sans-serif;
		font-weight: bold;
		font-size: 16px;
		display: flex;
		align-items: center;
		gap: 8px;
		box-shadow: 0 4px 15px rgba(171, 146, 92, 0.4);
		transition: all 0.3s ease;
		border: 2px solid rgba(255, 255, 255, 0.2);
	" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(171, 146, 92, 0.6)';"
		onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(171, 146, 92, 0.4)';">
		<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
			<path d="M19 12H5M12 19l-7-7 7-7" />
		</svg>
		Volver
	</a>


	<script>
		// ========== MEDIDAS DE SEGURIDAD COMPLETAS ==========

		// Deshabilitar men√∫ contextual (clic derecho)
		document.addEventListener('contextmenu', function (e) {
			e.preventDefault();
			return false;
		});

		// Deshabilitar selecci√≥n de texto
		document.addEventListener('selectstart', function (e) {
			e.preventDefault();
			return false;
		});

		// Deshabilitar copiar
		document.addEventListener('copy', function (e) {
			e.preventDefault();
			return false;
		});

		// Deshabilitar cortar
		document.addEventListener('cut', function (e) {
			e.preventDefault();
			return false;
		});

		// Deshabilitar pegar
		document.addEventListener('paste', function (e) {
			e.preventDefault();
			return false;
		});

		// Deshabilitar arrastrar
		document.addEventListener('dragstart', function (e) {
			e.preventDefault();
			return false;
		});

		// Deshabilitar teclas de inspecci√≥n y zoom
		document.addEventListener('keydown', function (e) {
			// F12 (DevTools)
			if (e.key === 'F12') {
				e.preventDefault();
				return false;
			}

			// Ctrl+Shift+I / Cmd+Option+I (Inspeccionar)
			if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'I') {
				e.preventDefault();
				return false;
			}

			// Ctrl+Shift+J / Cmd+Option+J (Consola)
			if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'J') {
				e.preventDefault();
				return false;
			}

			// Ctrl+Shift+C / Cmd+Option+C (Selector de elementos)
			if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'C') {
				e.preventDefault();
				return false;
			}

			// Ctrl+U / Cmd+U (Ver c√≥digo fuente)
			if ((e.ctrlKey || e.metaKey) && e.key === 'u') {
				e.preventDefault();
				return false;
			}

			// Ctrl+S / Cmd+S (Guardar p√°gina)
			if ((e.ctrlKey || e.metaKey) && e.key === 's') {
				e.preventDefault();
				return false;
			}

			// Ctrl+P / Cmd+P (Imprimir)
			if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
				e.preventDefault();
				return false;
			}

			// Ctrl+Plus / Ctrl+Minus (Zoom in/out)
			if ((e.ctrlKey || e.metaKey) && (e.key === '+' || e.key === '-' || e.key === '=' || e.key === '_')) {
				e.preventDefault();
				return false;
			}

			// Ctrl+0 (Reset zoom)
			if ((e.ctrlKey || e.metaKey) && e.key === '0') {
				e.preventDefault();
				return false;
			}
		});

		// Prevenir zoom con rueda del mouse + Ctrl
		document.addEventListener('wheel', function (e) {
			if (e.ctrlKey) {
				e.preventDefault();
			}
		}, { passive: false });

		// Prevenir zoom t√°ctil (pinch)
		document.addEventListener('touchmove', function (e) {
			if (e.touches.length > 1) {
				e.preventDefault();
			}
		}, { passive: false });

		// Prevenir zoom con gestos t√°ctiles
		document.addEventListener('gesturestart', function (e) {
			e.preventDefault();
		});

		document.addEventListener('gesturechange', function (e) {
			e.preventDefault();
		});

		document.addEventListener('gestureend', function (e) {
			e.preventDefault();
		});


		// Forzar orientaci√≥n landscape para PWA
		function forceLandscape() {
			// M√©todo 1: Screen Orientation API (m√°s moderno)
			if (screen.orientation && screen.orientation.lock) {
				screen.orientation.lock('landscape').then(function () {
					console.log('‚úÖ Orientaci√≥n bloqueada en landscape');
				}).catch(function (error) {
					console.log('‚ö†Ô∏è No se pudo bloquear orientaci√≥n:', error.message);
					// Intentar m√©todo alternativo
					tryFullscreenLandscape();
				});
			} else {
				// Si no est√° disponible, intentar fullscreen
				tryFullscreenLandscape();
			}
		}

		// M√©todo 2: Fullscreen con orientaci√≥n landscape
		function tryFullscreenLandscape() {
			const elem = document.documentElement;
			if (elem.requestFullscreen) {
				elem.requestFullscreen({ orientationLock: 'landscape' }).then(function () {
					console.log('‚úÖ Fullscreen landscape activado');
					// Intentar bloquear orientaci√≥n despu√©s de fullscreen
					if (screen.orientation && screen.orientation.lock) {
						screen.orientation.lock('landscape').catch(function (e) {
							console.log('Orientaci√≥n ya bloqueada o no soportada');
						});
					}
				}).catch(function (err) {
					console.log('‚ö†Ô∏è Fullscreen no disponible:', err.message);
				});
			}
		}

		// Detectar si es PWA (standalone mode)
		function isPWA() {
			return window.matchMedia('(display-mode: standalone)').matches ||
				window.navigator.standalone === true ||
				document.referrer.includes('android-app://');
		}

		// Intentar forzar landscape al cargar
		window.addEventListener('load', function () {
			if (isPWA()) {
				console.log('üì± PWA detectada - Forzando landscape');
				forceLandscape();
			} else {
				console.log('üåê Modo navegador - Landscape opcional');
			}
		});

		// Intentar forzar landscape en primera interacci√≥n
		document.addEventListener('click', function () {
			if (!document.fullscreenElement && isPWA()) {
				forceLandscape();
			}
		}, { once: true });

		// Detectar cambios de orientaci√≥n y avisar al usuario
		window.addEventListener('orientationchange', function () {
			if (window.orientation === 0 || window.orientation === 180) {
				// Portrait detectado
				console.log('‚ö†Ô∏è Dispositivo en portrait - Se recomienda landscape');
			} else {
				// Landscape detectado
				console.log('‚úÖ Dispositivo en landscape');
			}
		});

		// Funci√≥n para verificar orientaci√≥n y mostrar/ocultar mensaje
		function checkOrientation() {
			const rotatePrompt = document.getElementById('rotate-prompt');
			const isPortrait = window.innerHeight > window.innerWidth;

			if (isPortrait && window.innerWidth < 900) {
				// Mostrar mensaje de rotaci√≥n en portrait
				rotatePrompt.style.display = 'flex';
			} else {
				// Ocultar mensaje en landscape
				rotatePrompt.style.display = 'none';
			}
		}

		// Verificar orientaci√≥n al cargar y al cambiar tama√±o
		window.addEventListener('load', checkOrientation);
		window.addEventListener('resize', checkOrientation);
		window.addEventListener('orientationchange', checkOrientation);
	</script>
	<script src="app.js"></script>
	<script src="db-integration.js"></script>
</body>
</CodeContent>
<parameter name="EmptyFile">false